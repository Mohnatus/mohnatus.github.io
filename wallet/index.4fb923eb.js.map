{"mappings":"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","sources":["<anon>","src/script.js","src/js/db/index.js","src/js/db/constants.js","src/js/db/items.js","src/js/utils/notifier.js","src/js/db/tags.js","src/js/state/index.js","src/js/view/itemForm.js","src/js/view/elements.js","src/js/view/items.js","src/js/view/tagForm.js","src/js/view/tags.js"],"sourcesContent":["const $cb5f343bb15c779a$export$3c22ff8b64b8f565 = \"wallet\";\nconst $cb5f343bb15c779a$export$6a9022b4c5fcea02 = 2;\nconst $cb5f343bb15c779a$export$ecb8b5d0fe61b71e = \"items\";\nconst $cb5f343bb15c779a$export$1ccac7a1df77a4d0 = \"tags\";\n\n\nlet $77b7d876f63ece16$var$dbRequest;\nfunction $77b7d876f63ece16$export$6fec604aa7293d0c(storeName, toWrite) {\n    let db = $77b7d876f63ece16$var$dbRequest.result;\n    let transaction = db.transaction(storeName, toWrite ? \"readwrite\" : \"readonly\");\n    let store = transaction.objectStore(storeName);\n    return store;\n}\nfunction $77b7d876f63ece16$var$getItems() {\n    return new Promise((resolve)=>{\n        const items = $77b7d876f63ece16$export$6fec604aa7293d0c((0, $cb5f343bb15c779a$export$ecb8b5d0fe61b71e));\n        const request = items.getAll();\n        request.onsuccess = function() {\n            const result = request.result;\n            resolve(result);\n        };\n    });\n}\nasync function $77b7d876f63ece16$var$getTags() {\n    return new Promise((resolve)=>{\n        const tags = $77b7d876f63ece16$export$6fec604aa7293d0c((0, $cb5f343bb15c779a$export$1ccac7a1df77a4d0));\n        const request = tags.getAll();\n        request.onsuccess = function() {\n            const result = request.result;\n            resolve(result);\n        };\n    });\n}\nasync function $77b7d876f63ece16$export$28e7436902e0cf8b() {\n    return new Promise((resolve)=>{\n        $77b7d876f63ece16$var$dbRequest = indexedDB.open((0, $cb5f343bb15c779a$export$3c22ff8b64b8f565), (0, $cb5f343bb15c779a$export$6a9022b4c5fcea02));\n        $77b7d876f63ece16$var$dbRequest.onupgradeneeded = function() {\n            let db = $77b7d876f63ece16$var$dbRequest.result;\n            if (!db.objectStoreNames.contains((0, $cb5f343bb15c779a$export$ecb8b5d0fe61b71e))) db.createObjectStore((0, $cb5f343bb15c779a$export$ecb8b5d0fe61b71e), {\n                keyPath: \"id\"\n            });\n            if (!db.objectStoreNames.contains((0, $cb5f343bb15c779a$export$1ccac7a1df77a4d0))) db.createObjectStore((0, $cb5f343bb15c779a$export$1ccac7a1df77a4d0), {\n                keyPath: \"id\"\n            });\n        };\n        $77b7d876f63ece16$var$dbRequest.onerror = function() {\n            console.error(\"DB ERROR\", $77b7d876f63ece16$var$dbRequest.error);\n        };\n        $77b7d876f63ece16$var$dbRequest.onsuccess = function() {\n            Promise.all([\n                $77b7d876f63ece16$var$getTags(),\n                $77b7d876f63ece16$var$getItems()\n            ]).then(([tags, items])=>{\n                resolve({\n                    tags: tags,\n                    items: items\n                });\n            });\n        };\n    });\n}\n\n\n\nfunction $7cf706797b1cdf54$export$5e14cdade93d6f7b(message, data) {\n    alert(message);\n    console.info(message, data);\n}\nfunction $7cf706797b1cdf54$export$740944ffd2f8d33e(message, data) {\n    alert(message);\n    console.error(message, data);\n}\n\n\n\nfunction $18fe714b7c5411fa$export$d9965447fadaae35(item) {\n    const items = (0, $77b7d876f63ece16$export$6fec604aa7293d0c)((0, $cb5f343bb15c779a$export$ecb8b5d0fe61b71e), true);\n    let request = items.add(item);\n    request.onsuccess = function() {\n        (0, $7cf706797b1cdf54$export$5e14cdade93d6f7b)(\"Запись успешно сохранена\");\n    };\n    request.onerror = function() {\n        (0, $7cf706797b1cdf54$export$740944ffd2f8d33e)(\"Не удалось сохранить запись\", request.error);\n    };\n}\nfunction $18fe714b7c5411fa$export$6d74f2e0bd134e69(item) {\n    let items = (0, $77b7d876f63ece16$export$6fec604aa7293d0c)((0, $cb5f343bb15c779a$export$ecb8b5d0fe61b71e), true);\n    let request = items.delete(item.id);\n    request.onsuccess = function() {\n        (0, $7cf706797b1cdf54$export$5e14cdade93d6f7b)(\"Запись успешно удалена\");\n    };\n    request.onerror = function() {\n        (0, $7cf706797b1cdf54$export$740944ffd2f8d33e)(\"Не удалось удалить запись\", request.error);\n    };\n}\n\n\n\n\n\nfunction $ab9cdb72c3c9787f$export$9136620570748e5(tag) {\n    let tags = (0, $77b7d876f63ece16$export$6fec604aa7293d0c)((0, $cb5f343bb15c779a$export$1ccac7a1df77a4d0), true);\n    let request = tags.add(tag);\n    request.onsuccess = function() {\n        (0, $7cf706797b1cdf54$export$5e14cdade93d6f7b)(\"Запись успешно сохранена\");\n    };\n    request.onerror = function() {\n        (0, $7cf706797b1cdf54$export$740944ffd2f8d33e)(\"Не удалось сохранить запись\", request.error);\n    };\n}\nfunction $ab9cdb72c3c9787f$export$db24519f95b43085(tag) {\n    let tags = (0, $77b7d876f63ece16$export$6fec604aa7293d0c)((0, $cb5f343bb15c779a$export$1ccac7a1df77a4d0), true);\n    let request = tags.delete(tag.id);\n    request.onsuccess = function() {\n        (0, $7cf706797b1cdf54$export$5e14cdade93d6f7b)(\"Запись успешно удалена\");\n    };\n    request.onerror = function() {\n        (0, $7cf706797b1cdf54$export$740944ffd2f8d33e)(\"Не удалось удалить запись\", request.error);\n    };\n}\n\n\nconst $14d4ca1efde46ee2$export$4dbdc8f16fed8a34 = {\n    items: \"items\",\n    tags: \"tags\"\n};\nconst $14d4ca1efde46ee2$export$4bf9923669ad6c63 = {\n    update: \"update\",\n    add: \"add\",\n    remove: \"remove\"\n};\nconst $14d4ca1efde46ee2$var$state = {\n    items: [],\n    tags: []\n};\nconst $14d4ca1efde46ee2$var$lastId = {\n    items: 0,\n    tags: 0\n};\nconst $14d4ca1efde46ee2$var$callbacks = {};\nfunction $14d4ca1efde46ee2$export$50fdfeece43146fd(field) {\n    return $14d4ca1efde46ee2$var$state[field];\n}\nfunction $14d4ca1efde46ee2$export$218c8c3169c024d2(field) {\n    return ++$14d4ca1efde46ee2$var$lastId[field];\n}\nfunction $14d4ca1efde46ee2$var$onChange(field, event, data) {\n    const fieldCbs = $14d4ca1efde46ee2$var$callbacks[field];\n    if (!fieldCbs) return;\n    const eventCbs = fieldCbs[event];\n    if (!eventCbs) return;\n    eventCbs.forEach((cb)=>cb(data));\n}\nfunction $14d4ca1efde46ee2$export$ec068583843480e7(field, event, cb) {\n    if (!(field in $14d4ca1efde46ee2$var$callbacks)) $14d4ca1efde46ee2$var$callbacks[field] = {};\n    if (!(event in $14d4ca1efde46ee2$var$callbacks[field])) $14d4ca1efde46ee2$var$callbacks[field][event] = [];\n    $14d4ca1efde46ee2$var$callbacks[field][event].push(cb);\n}\nfunction $14d4ca1efde46ee2$export$2cd8252107eb640b({ tags: tagsList, items: itemsList }) {\n    if (tagsList.length > 0) {\n        $14d4ca1efde46ee2$var$lastId.tags = tagsList[tagsList.length - 1].id;\n        $14d4ca1efde46ee2$var$state.tags = tagsList;\n        $14d4ca1efde46ee2$var$onChange($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags, $14d4ca1efde46ee2$export$4bf9923669ad6c63.update, tagsList);\n    }\n    if (itemsList.length > 0) {\n        $14d4ca1efde46ee2$var$lastId.items = itemsList[itemsList.length - 1].id;\n        $14d4ca1efde46ee2$var$state.items = itemsList;\n        $14d4ca1efde46ee2$var$onChange($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items, $14d4ca1efde46ee2$export$4bf9923669ad6c63.update, itemsList);\n    }\n}\nfunction $14d4ca1efde46ee2$export$e16d8520af44a096(field, instance) {\n    $14d4ca1efde46ee2$var$state[field].push(instance);\n    $14d4ca1efde46ee2$var$onChange(field, $14d4ca1efde46ee2$export$4bf9923669ad6c63.add, instance);\n}\nfunction $14d4ca1efde46ee2$export$cd7f480d6b8286c3(field, instance) {\n    $14d4ca1efde46ee2$var$state[field] = $14d4ca1efde46ee2$var$state[field].filter((i)=>i.id !== instance.id);\n    $14d4ca1efde46ee2$var$onChange(field, $14d4ca1efde46ee2$export$4bf9923669ad6c63.remove, instance);\n}\n\n\n\n\nconst $562b1b97bd523649$export$82babaa65029102d = {\n    items: {\n        list: \"items\",\n        template: \"item-tmpl\",\n        subitemTemplate: \"subitem-tmpl\"\n    },\n    itemForm: {\n        dialog: \"new-item-dialog\",\n        form: \"new-item-form\",\n        addButton: \"add-item\",\n        closeButton: \"close-new-item-dialog\",\n        subitemsList: \"new-item-form-subitems\",\n        tagsSelect: \"tags-select\",\n        addSubitemBtn: \"new-item-add-subitem\",\n        subitemTemplate: \"subitem-form-tmpl\"\n    },\n    tags: {\n        list: \"tags\",\n        template: \"tag-tmpl\"\n    },\n    tagForm: {\n        dialog: \"new-tag-dialog\",\n        form: \"new-tag-form\",\n        addButton: \"add-tag\",\n        closeButton: \"close-new-tag-dialog\"\n    }\n};\nconst $562b1b97bd523649$var$cache = {};\nfunction $562b1b97bd523649$export$d16800b7e59a8051(id) {\n    if ($562b1b97bd523649$var$cache[id]) return $562b1b97bd523649$var$cache[id];\n    const element = document.getElementById(id);\n    $562b1b97bd523649$var$cache[id] = element;\n    return element;\n}\nfunction $562b1b97bd523649$export$9b1a70d8e05b0fa6(id) {\n    const template = $562b1b97bd523649$export$d16800b7e59a8051(id);\n    const $clone = template.content.cloneNode(true);\n    return $clone;\n}\n\n\nconst $88ae43dff40ab9c2$var$selectors = {\n    subitem: \".subitem-form\"\n};\nfunction $88ae43dff40ab9c2$var$renderSubitemForm() {\n    const $clone = (0, $562b1b97bd523649$export$9b1a70d8e05b0fa6)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.subitemTemplate);\n    const $subitem = $clone.querySelector($88ae43dff40ab9c2$var$selectors.subitem);\n    const $subitemSelect = $subitem.querySelector(\"select\");\n    const tags = (0, $14d4ca1efde46ee2$export$50fdfeece43146fd)((0, $14d4ca1efde46ee2$export$4dbdc8f16fed8a34).tags);\n    tags.forEach((tag)=>{\n        const $tag = $88ae43dff40ab9c2$var$renderTagOption(tag);\n        $subitemSelect.appendChild($tag);\n    });\n    return $subitem;\n}\nfunction $88ae43dff40ab9c2$var$renderTagOption(tag) {\n    const $option = document.createElement(\"option\");\n    $option.textContent = tag.name;\n    $option.value = tag.id;\n    return $option;\n}\nfunction $88ae43dff40ab9c2$export$a7d31dc4e9b4d21a() {\n    const $tagsSelect = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.tagsSelect);\n    $tagsSelect.innerHTML = \"\";\n    const tags = (0, $14d4ca1efde46ee2$export$50fdfeece43146fd)((0, $14d4ca1efde46ee2$export$4dbdc8f16fed8a34).tags);\n    tags.forEach((tag)=>{\n        const $option = $88ae43dff40ab9c2$var$renderTagOption(tag);\n        $tagsSelect.appendChild($option);\n    });\n}\nfunction $88ae43dff40ab9c2$var$resetNewItemForm() {\n    const $newItemForm = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.form);\n    const $newItemFormSubitemsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.subitemsList);\n    $newItemForm.reset();\n    $newItemFormSubitemsList.innerHTML = \"\";\n}\nfunction $88ae43dff40ab9c2$var$openNewItemForm() {\n    const $newItemDialog = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.dialog);\n    $newItemDialog.showModal();\n}\nfunction $88ae43dff40ab9c2$export$2f62053d3c3a3e3e() {\n    const $newItemDialog = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.dialog);\n    $newItemDialog.close();\n    $88ae43dff40ab9c2$var$resetNewItemForm();\n}\nfunction $88ae43dff40ab9c2$export$a5a4f02b496d762d() {\n    const $newItemForm = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.form);\n    const fd = new FormData($newItemForm);\n    const subitemTexts = fd.getAll(\"subitems[text][]\");\n    const subitemPrices = fd.getAll(\"subitems[price][]\");\n    const subitemTags = fd.getAll(\"subitems[tag][]\");\n    return {\n        text: fd.get(\"text\"),\n        price: fd.get(\"price\"),\n        tag: Number(fd.get(\"tag\")),\n        subitems: subitemTexts.map((text, i)=>{\n            return {\n                text: text,\n                price: subitemPrices[i],\n                tag: Number(subitemTags[i])\n            };\n        })\n    };\n}\nfunction $88ae43dff40ab9c2$export$5aaae3b85e8f235d(config) {\n    const { onSubmit: onSubmit } = config;\n    const $newItemForm = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.form);\n    const $addItemButton = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.addButton);\n    const $closeDialogButton = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.closeButton);\n    const $addSubitemButton = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.addSubitemBtn);\n    const $subitemsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).itemForm.subitemsList);\n    $newItemForm.addEventListener(\"submit\", (e)=>{\n        e.preventDefault();\n        onSubmit($88ae43dff40ab9c2$export$a5a4f02b496d762d());\n    });\n    $addItemButton.addEventListener(\"click\", ()=>{\n        $88ae43dff40ab9c2$var$openNewItemForm();\n    });\n    $closeDialogButton.addEventListener(\"click\", ()=>{\n        $88ae43dff40ab9c2$export$2f62053d3c3a3e3e();\n    });\n    $addSubitemButton.addEventListener(\"click\", ()=>{\n        const $subitemForm = $88ae43dff40ab9c2$var$renderSubitemForm();\n        $subitemsList.appendChild($subitemForm);\n    });\n}\n\n\n\n\nconst $c151cb9ebf0d3253$var$selectors = {\n    item: \".item\",\n    itemText: \".item-text\",\n    itemPrice: \".item-price\",\n    itemTag: \".item-tag\",\n    itemRemove: \".item-remove\",\n    subitems: \".item-subitems\",\n    subitem: \".subitem\",\n    subitemText: \".subitem-text\",\n    subitemPrice: \".subitem-price\",\n    subitemTag: \".subitem-tag\"\n};\nfunction $c151cb9ebf0d3253$var$renderSubitem(subitem) {\n    const $clone = (0, $562b1b97bd523649$export$9b1a70d8e05b0fa6)((0, $562b1b97bd523649$export$82babaa65029102d).items.subitemTemplate);\n    const $subitem = $clone.querySelector($c151cb9ebf0d3253$var$selectors.subitem);\n    $subitem.querySelector($c151cb9ebf0d3253$var$selectors.subitemText).textContent = subitem.text;\n    $subitem.querySelector($c151cb9ebf0d3253$var$selectors.subitemPrice).textContent = subitem.price;\n    const tags = (0, $14d4ca1efde46ee2$export$50fdfeece43146fd)((0, $14d4ca1efde46ee2$export$4dbdc8f16fed8a34).tags);\n    const subitemTag = tags.find((tag)=>tag.id === subitem.tag);\n    $subitem.querySelector($c151cb9ebf0d3253$var$selectors.subitemTag).textContent = subitemTag?.name || \"\";\n    return $subitem;\n}\nfunction $c151cb9ebf0d3253$var$renderItem(item) {\n    const $clone = (0, $562b1b97bd523649$export$9b1a70d8e05b0fa6)((0, $562b1b97bd523649$export$82babaa65029102d).items.template);\n    const $item = $clone.querySelector($c151cb9ebf0d3253$var$selectors.item);\n    $item.dataset.itemId = item.id;\n    $item.querySelector($c151cb9ebf0d3253$var$selectors.itemText).textContent = item.text;\n    $item.querySelector($c151cb9ebf0d3253$var$selectors.itemPrice).textContent = item.price;\n    const tags = (0, $14d4ca1efde46ee2$export$50fdfeece43146fd)((0, $14d4ca1efde46ee2$export$4dbdc8f16fed8a34).tags);\n    const itemTag = tags.find((tag)=>tag.id === item.tag);\n    $item.querySelector($c151cb9ebf0d3253$var$selectors.itemTag).textContent = itemTag?.name || \"\";\n    if (item.subitems?.length > 0) {\n        const $subitemsList = $item.querySelector($c151cb9ebf0d3253$var$selectors.subitems);\n        item.subitems.forEach((subitem)=>{\n            const $subitem = $c151cb9ebf0d3253$var$renderSubitem(subitem);\n            $subitemsList.appendChild($subitem);\n        });\n    }\n    return $item;\n}\nfunction $c151cb9ebf0d3253$export$a073caafba2bf897(items) {\n    const $itemsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).items.list);\n    items.forEach((item)=>{\n        const $item = $c151cb9ebf0d3253$var$renderItem(item);\n        $itemsList.appendChild($item);\n    });\n}\nfunction $c151cb9ebf0d3253$export$c1a4300032ac0b7e(item) {\n    const $item = $c151cb9ebf0d3253$var$renderItem(item);\n    const $itemsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).items.list);\n    $itemsList.appendChild($item);\n}\nfunction $c151cb9ebf0d3253$export$557da4bd554f1d64(itemId) {\n    const $element = document.querySelector(`[data-item-id=\"${itemId}\"]`);\n    $element.remove();\n}\nfunction $c151cb9ebf0d3253$export$ec6607eeb8c2a5d9(config) {\n    const { onRemove: onRemove } = config;\n    const $itemsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).items.list);\n    $itemsList.addEventListener(\"click\", (e)=>{\n        const $removeButton = e.target.closest($c151cb9ebf0d3253$var$selectors.itemRemove);\n        if ($removeButton) {\n            const $tag = e.target.closest($c151cb9ebf0d3253$var$selectors.item);\n            onRemove(Number($tag.dataset.itemId));\n        }\n    });\n}\n\n\n\nfunction $84e1707131c903ad$var$resetNewTagForm() {\n    const $newTagForm = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.form);\n    $newTagForm.reset();\n}\nfunction $84e1707131c903ad$var$openNewTagForm() {\n    const $newTagDialog = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.dialog);\n    $newTagDialog.showModal();\n}\nfunction $84e1707131c903ad$export$6e142ec7d834c3f8() {\n    const $newTagDialog = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.dialog);\n    $newTagDialog.close();\n    $84e1707131c903ad$var$resetNewTagForm();\n}\nfunction $84e1707131c903ad$var$getNewTagFormData() {\n    const $newTagForm = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.form);\n    return {\n        name: $newTagForm.elements.name.value\n    };\n}\nfunction $84e1707131c903ad$export$5b882f86b632414c(config) {\n    const { onSubmit: onSubmit } = config;\n    const $newTagForm = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.form);\n    const $addTagButton = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.addButton);\n    const $closeDialogButton = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tagForm.closeButton);\n    console.log($addTagButton);\n    $newTagForm.addEventListener(\"submit\", (e)=>{\n        e.preventDefault();\n        onSubmit($84e1707131c903ad$var$getNewTagFormData());\n    });\n    $addTagButton.addEventListener(\"click\", ()=>{\n        $84e1707131c903ad$var$openNewTagForm();\n    });\n    $closeDialogButton.addEventListener(\"click\", ()=>{\n        $84e1707131c903ad$export$6e142ec7d834c3f8();\n    });\n}\n\n\n\nconst $b5a61f6ff1db7acf$var$selectors = {\n    tag: \".tag\",\n    tagName: \".tag-name\",\n    tagRemove: \".tag-remove\"\n};\nfunction $b5a61f6ff1db7acf$var$renderTag(tag) {\n    const $clone = (0, $562b1b97bd523649$export$9b1a70d8e05b0fa6)((0, $562b1b97bd523649$export$82babaa65029102d).tags.template);\n    const $tag = $clone.querySelector($b5a61f6ff1db7acf$var$selectors.tag);\n    $tag.dataset.tagId = tag.id;\n    $tag.querySelector($b5a61f6ff1db7acf$var$selectors.tagName).textContent = tag.name;\n    return $tag;\n}\nfunction $b5a61f6ff1db7acf$export$5153dfacc9e003db(tags) {\n    const $tagsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tags.list);\n    tags.forEach((tag)=>{\n        const $tag = $b5a61f6ff1db7acf$var$renderTag(tag);\n        $tagsList.appendChild($tag);\n    });\n}\nfunction $b5a61f6ff1db7acf$export$5aae0045fcf71e3a(tag) {\n    const $tagsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tags.list);\n    const $tag = $b5a61f6ff1db7acf$var$renderTag(tag);\n    $tagsList.appendChild($tag);\n}\nfunction $b5a61f6ff1db7acf$export$400216edc5450072(tagId) {\n    const $element = document.querySelector(`[data-tag-id=\"${tagId}\"]`);\n    $element.remove();\n}\nfunction $b5a61f6ff1db7acf$export$68277c4d50aef9d4(config) {\n    const { onRemove: onRemove } = config;\n    const $tagsList = (0, $562b1b97bd523649$export$d16800b7e59a8051)((0, $562b1b97bd523649$export$82babaa65029102d).tags.list);\n    $tagsList.addEventListener(\"click\", (e)=>{\n        const $removeButton = e.target.closest($b5a61f6ff1db7acf$var$selectors.tagRemove);\n        if ($removeButton) {\n            const $tag = e.target.closest($b5a61f6ff1db7acf$var$selectors.tag);\n            onRemove(Number($tag.dataset.tagId));\n        }\n    });\n}\n\n\n// Subscriptions\n$14d4ca1efde46ee2$export$ec068583843480e7($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags, $14d4ca1efde46ee2$export$4bf9923669ad6c63.update, (tags)=>{\n    (0, $b5a61f6ff1db7acf$export$5153dfacc9e003db)(tags);\n    (0, $88ae43dff40ab9c2$export$a7d31dc4e9b4d21a)();\n});\n$14d4ca1efde46ee2$export$ec068583843480e7($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags, $14d4ca1efde46ee2$export$4bf9923669ad6c63.add, (tag)=>{\n    (0, $b5a61f6ff1db7acf$export$5aae0045fcf71e3a)(tag);\n    (0, $84e1707131c903ad$export$6e142ec7d834c3f8)();\n    (0, $88ae43dff40ab9c2$export$a7d31dc4e9b4d21a)();\n    (0, $ab9cdb72c3c9787f$export$9136620570748e5)(tag);\n});\n$14d4ca1efde46ee2$export$ec068583843480e7($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags, $14d4ca1efde46ee2$export$4bf9923669ad6c63.remove, (tag)=>{\n    (0, $b5a61f6ff1db7acf$export$400216edc5450072)(tag.id);\n    (0, $88ae43dff40ab9c2$export$a7d31dc4e9b4d21a)();\n    (0, $ab9cdb72c3c9787f$export$db24519f95b43085)(tag);\n});\n$14d4ca1efde46ee2$export$ec068583843480e7($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items, $14d4ca1efde46ee2$export$4bf9923669ad6c63.update, (items)=>{\n    (0, $c151cb9ebf0d3253$export$a073caafba2bf897)(items);\n});\n$14d4ca1efde46ee2$export$ec068583843480e7($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items, $14d4ca1efde46ee2$export$4bf9923669ad6c63.add, (item)=>{\n    (0, $c151cb9ebf0d3253$export$c1a4300032ac0b7e)(item);\n    (0, $88ae43dff40ab9c2$export$2f62053d3c3a3e3e)();\n    (0, $18fe714b7c5411fa$export$d9965447fadaae35)(item);\n});\n$14d4ca1efde46ee2$export$ec068583843480e7($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items, $14d4ca1efde46ee2$export$4bf9923669ad6c63.remove, (item)=>{\n    (0, $c151cb9ebf0d3253$export$557da4bd554f1d64)(item.id);\n    (0, $18fe714b7c5411fa$export$6d74f2e0bd134e69)(item);\n});\n// Database\n(0, $77b7d876f63ece16$export$28e7436902e0cf8b)().then(({ tags: tags, items: items })=>{\n    $14d4ca1efde46ee2$export$2cd8252107eb640b({\n        tags: tags,\n        items: items\n    });\n});\n// Init\nconsole.log(\"init\");\n(0, $88ae43dff40ab9c2$export$5aaae3b85e8f235d)({\n    onSubmit: (formData)=>{\n        const { text: text, price: price, tag: tag, subitems: subitems } = formData;\n        const createdAt = +new Date();\n        const newItem = {\n            id: $14d4ca1efde46ee2$export$218c8c3169c024d2($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items),\n            text: text,\n            price: price,\n            tag: tag,\n            createdAt: createdAt,\n            subitems: subitems.map((subitem)=>{\n                return {\n                    id: $14d4ca1efde46ee2$export$218c8c3169c024d2($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items),\n                    text: subitem.text,\n                    price: subitem.price,\n                    tag: subitem.tag,\n                    createdAt: createdAt\n                };\n            })\n        };\n        $14d4ca1efde46ee2$export$e16d8520af44a096($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items, newItem);\n    }\n});\n(0, $84e1707131c903ad$export$5b882f86b632414c)({\n    onSubmit: (formData)=>{\n        const { name: name } = formData;\n        const newTag = {\n            id: $14d4ca1efde46ee2$export$218c8c3169c024d2($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags),\n            name: name,\n            createdAt: +new Date()\n        };\n        $14d4ca1efde46ee2$export$e16d8520af44a096($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags, newTag);\n    }\n});\n(0, $c151cb9ebf0d3253$export$ec6607eeb8c2a5d9)({\n    onRemove: (itemId)=>{\n        const items = $14d4ca1efde46ee2$export$50fdfeece43146fd($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items);\n        const item = items.find((i)=>i.id === itemId);\n        $14d4ca1efde46ee2$export$cd7f480d6b8286c3($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items, item);\n    }\n});\n(0, $b5a61f6ff1db7acf$export$68277c4d50aef9d4)({\n    onRemove: (tagId)=>{\n        const tags = $14d4ca1efde46ee2$export$50fdfeece43146fd($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags);\n        const tag = tags.find((t)=>t.id === tagId);\n        const items = $14d4ca1efde46ee2$export$50fdfeece43146fd($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.items);\n        const tagItems = items.some((item)=>{\n            if (item.tag === tag.id) return true;\n            return item.subitems.some((subitem)=>subitem.tag === tag.id);\n        });\n        if (tagItems) {\n            (0, $7cf706797b1cdf54$export$740944ffd2f8d33e)(\"Тег нельзя удалить\");\n            return;\n        }\n        $14d4ca1efde46ee2$export$cd7f480d6b8286c3($14d4ca1efde46ee2$export$4dbdc8f16fed8a34.tags, tag);\n    }\n});\n\n\n//# sourceMappingURL=index.4fb923eb.js.map\n","import { initDB } from \"./js/db\";\nimport { addItemToDb, removeItemFromDb } from \"./js/db/items\";\nimport { addTagToDb, removeTagFromDb } from \"./js/db/tags\";\nimport * as state from \"./js/state\";\nimport { notifyError } from \"./js/utils/notifier\";\nimport {\n  closeNewItemForm,\n  initNewItemForm,\n  updateTagsSelect,\n} from \"./js/view/itemForm\";\nimport {\n  addItemToList,\n  initItemsList,\n  removeItemFromList,\n  renderItemsList,\n} from \"./js/view/items\";\nimport { closeNewTagForm, initNewTagForm } from \"./js/view/tagForm\";\nimport {\n  addTagToList,\n  initTagsList,\n  removeTagFromList,\n  renderTagsList,\n} from \"./js/view/tags\";\n\n// Subscriptions\nstate.subscribe(state.fields.tags, state.events.update, (tags) => {\n  renderTagsList(tags);\n  updateTagsSelect();\n});\nstate.subscribe(state.fields.tags, state.events.add, (tag) => {\n  addTagToList(tag);\n  closeNewTagForm();\n  updateTagsSelect();\n  addTagToDb(tag);\n});\nstate.subscribe(state.fields.tags, state.events.remove, (tag) => {\n  removeTagFromList(tag.id);\n  updateTagsSelect();\n  removeTagFromDb(tag);\n});\n\nstate.subscribe(state.fields.items, state.events.update, (items) => {\n  renderItemsList(items);\n});\nstate.subscribe(state.fields.items, state.events.add, (item) => {\n  addItemToList(item);\n  closeNewItemForm();\n  addItemToDb(item);\n});\nstate.subscribe(state.fields.items, state.events.remove, (item) => {\n  removeItemFromList(item.id);\n  removeItemFromDb(item);\n});\n\n// Database\ninitDB().then(({ tags, items }) => {\n  state.init({ tags, items });\n});\n\n// Init\nconsole.log(\"init\");\ninitNewItemForm({\n  onSubmit: (formData) => {\n    const { text, price, tag, subitems } = formData;\n    const createdAt = +new Date();\n\n    const newItem = {\n      id: state.getId(state.fields.items),\n      text,\n      price,\n      tag,\n      createdAt,\n\n      subitems: subitems.map((subitem) => {\n        return {\n          id: state.getId(state.fields.items),\n          text: subitem.text,\n          price: subitem.price,\n          tag: subitem.tag,\n          createdAt,\n        };\n      }),\n    };\n\n    state.add(state.fields.items, newItem);\n  },\n});\ninitNewTagForm({\n  onSubmit: (formData) => {\n    const { name } = formData;\n    const newTag = {\n      id: state.getId(state.fields.tags),\n      name,\n      createdAt: +new Date(),\n    };\n    state.add(state.fields.tags, newTag);\n  },\n});\ninitItemsList({\n  onRemove: (itemId) => {\n    const items = state.getState(state.fields.items);\n    const item = items.find((i) => i.id === itemId);\n    state.remove(state.fields.items, item);\n  },\n});\ninitTagsList({\n  onRemove: (tagId) => {\n    const tags = state.getState(state.fields.tags);\n    const tag = tags.find((t) => t.id === tagId);\n\n    const items = state.getState(state.fields.items);\n\n    const tagItems = items.some((item) => {\n      if (item.tag === tag.id) return true;\n      return item.subitems.some((subitem) => subitem.tag === tag.id);\n    });\n    if (tagItems) {\n      notifyError(\"Тег нельзя удалить\");\n      return;\n    }\n    state.remove(state.fields.tags, tag);\n  },\n});\n","import { DB_NAME, DB_VERSION, ITEMS_STORE_NAME, TAGS_STORE_NAME } from \"./constants\";\n\nlet dbRequest;\n\nexport function getStore(storeName, toWrite) {\n  let db = dbRequest.result;\n  let transaction = db.transaction(storeName, toWrite ? \"readwrite\" : \"readonly\");\n  let store = transaction.objectStore(storeName);\n  return store;\n}\n\nfunction getItems() {\n  return new Promise((resolve) => {\n    const items = getStore(ITEMS_STORE_NAME);\n    const request = items.getAll();\n    request.onsuccess = function () {\n      const result = request.result;\n      resolve(result);\n    };\n  });\n}\n\nasync function getTags() {\n  return new Promise((resolve) => {\n    const tags = getStore(TAGS_STORE_NAME);\n    const request = tags.getAll();\n    request.onsuccess = function () {\n      const result = request.result;\n      resolve(result);\n    };\n  });\n}\n\nexport async function initDB() {\n  return new Promise((resolve) => {\n    dbRequest = indexedDB.open(DB_NAME, DB_VERSION);\n    dbRequest.onupgradeneeded = function () {\n      let db = dbRequest.result;\n      if (!db.objectStoreNames.contains(ITEMS_STORE_NAME)) {\n        db.createObjectStore(ITEMS_STORE_NAME, { keyPath: \"id\" });\n      }\n      if (!db.objectStoreNames.contains(TAGS_STORE_NAME)) {\n        db.createObjectStore(TAGS_STORE_NAME, { keyPath: \"id\" });\n      }\n    };\n    dbRequest.onerror = function () {\n      console.error(\"DB ERROR\", dbRequest.error);\n    };\n    dbRequest.onsuccess = function () {\n      Promise.all([getTags(), getItems()]).then(([tags, items]) => {\n        resolve({ tags, items });\n      });\n    };\n  });\n}\n","export const DB_NAME = \"wallet\";\nexport const DB_VERSION = 2;\nexport const ITEMS_STORE_NAME = \"items\";\nexport const TAGS_STORE_NAME = \"tags\";\n","import { getStore } from \".\";\nimport { notify, notifyError } from \"../utils/notifier\";\nimport { ITEMS_STORE_NAME } from \"./constants\";\n\nexport function addItemToDb(item) {\n  const items = getStore(ITEMS_STORE_NAME, true);\n  let request = items.add(item);\n  request.onsuccess = function () {\n    notify(\"Запись успешно сохранена\");\n  };\n  request.onerror = function () {\n    notifyError(\"Не удалось сохранить запись\", request.error);\n  };\n}\n\nexport function removeItemFromDb(item) {\n  let items = getStore(ITEMS_STORE_NAME, true);\n  let request = items.delete(item.id);\n  request.onsuccess = function () {\n    notify(\"Запись успешно удалена\");\n  };\n  request.onerror = function () {\n    notifyError(\"Не удалось удалить запись\", request.error);\n  };\n}\n","export function notify(message, data) {\n  alert(message);\n  console.info(message, data);\n}\n\nexport function notifyError(message, data) {\n  alert(message);\n  console.error(message, data);\n}\n","import { getStore } from \".\";\nimport { notify, notifyError } from \"../utils/notifier\";\nimport { TAGS_STORE_NAME } from \"./constants\";\n\nexport function addTagToDb(tag) {\n  let tags = getStore(TAGS_STORE_NAME, true);\n  let request = tags.add(tag);\n  request.onsuccess = function () {\n    notify(\"Запись успешно сохранена\");\n  };\n  request.onerror = function () {\n    notifyError(\"Не удалось сохранить запись\", request.error);\n  };\n}\n\nexport function removeTagFromDb(tag) {\n  let tags = getStore(TAGS_STORE_NAME, true);\n  let request = tags.delete(tag.id);\n  request.onsuccess = function () {\n    notify(\"Запись успешно удалена\");\n  };\n  request.onerror = function () {\n    notifyError(\"Не удалось удалить запись\", request.error);\n  };\n}\n","export const fields = {\n  items: \"items\",\n  tags: \"tags\",\n};\n\nexport const events = {\n  update: \"update\",\n  add: \"add\",\n  remove: \"remove\",\n};\n\nconst state = {\n  items: [],\n  tags: [],\n};\n\nconst lastId = {\n  items: 0,\n  tags: 0,\n};\n\nconst callbacks = {};\n\nexport function getState(field) {\n  return state[field];\n}\n\nexport function getId(field) {\n  return ++lastId[field];\n}\n\nfunction onChange(field, event, data) {\n  const fieldCbs = callbacks[field];\n  if (!fieldCbs) return;\n\n  const eventCbs = fieldCbs[event];\n  if (!eventCbs) return;\n\n  eventCbs.forEach((cb) => cb(data));\n}\n\nexport function subscribe(field, event, cb) {\n  if (!(field in callbacks)) callbacks[field] = {};\n  if (!(event in callbacks[field])) callbacks[field][event] = [];\n\n  callbacks[field][event].push(cb);\n}\n\nexport function init({ tags: tagsList, items: itemsList }) {\n  if (tagsList.length > 0) {\n    lastId.tags = tagsList[tagsList.length - 1].id;\n    state.tags = tagsList;\n    onChange(fields.tags, events.update, tagsList);\n  }\n\n  if (itemsList.length > 0) {\n    lastId.items = itemsList[itemsList.length - 1].id;\n    state.items = itemsList;\n    onChange(fields.items, events.update, itemsList);\n  }\n}\n\nexport function add(field, instance) {\n  state[field].push(instance);\n  onChange(field, events.add, instance);\n}\n\nexport function remove(field, instance) {\n  state[field] = state[field].filter((i) => i.id !== instance.id);\n  onChange(field, events.remove, instance);\n}\n","import { fields, getState } from \"../state\";\nimport { IDS, getElement, getTemplate } from \"./elements\";\n\nconst selectors = {\n  subitem: \".subitem-form\",\n};\n\nfunction renderSubitemForm() {\n  const $clone = getTemplate(IDS.itemForm.subitemTemplate);\n\n  const $subitem = $clone.querySelector(selectors.subitem);\n  const $subitemSelect = $subitem.querySelector(\"select\");\n\n  const tags = getState(fields.tags);\n\n  tags.forEach((tag) => {\n    const $tag = renderTagOption(tag);\n    $subitemSelect.appendChild($tag);\n  });\n\n  return $subitem;\n}\n\nfunction renderTagOption(tag) {\n  const $option = document.createElement(\"option\");\n  $option.textContent = tag.name;\n  $option.value = tag.id;\n  return $option;\n}\n\nexport function updateTagsSelect() {\n  const $tagsSelect = getElement(IDS.itemForm.tagsSelect);\n\n  $tagsSelect.innerHTML = \"\";\n\n  const tags = getState(fields.tags);\n\n  tags.forEach((tag) => {\n    const $option = renderTagOption(tag);\n    $tagsSelect.appendChild($option);\n  });\n}\n\nfunction resetNewItemForm() {\n  const $newItemForm = getElement(IDS.itemForm.form);\n  const $newItemFormSubitemsList = getElement(IDS.itemForm.subitemsList);\n\n  $newItemForm.reset();\n  $newItemFormSubitemsList.innerHTML = \"\";\n}\n\nfunction openNewItemForm() {\n  const $newItemDialog = getElement(IDS.itemForm.dialog);\n  $newItemDialog.showModal();\n}\n\nexport function closeNewItemForm() {\n  const $newItemDialog = getElement(IDS.itemForm.dialog);\n  $newItemDialog.close();\n  resetNewItemForm();\n}\n\nexport function getNewItemFormData() {\n  const $newItemForm = getElement(IDS.itemForm.form);\n\n  const fd = new FormData($newItemForm);\n\n  const subitemTexts = fd.getAll(\"subitems[text][]\");\n  const subitemPrices = fd.getAll(\"subitems[price][]\");\n  const subitemTags = fd.getAll(\"subitems[tag][]\");\n\n  return {\n    text: fd.get(\"text\"),\n    price: fd.get(\"price\"),\n    tag: Number(fd.get(\"tag\")),\n\n    subitems: subitemTexts.map((text, i) => {\n      return {\n        text,\n        price: subitemPrices[i],\n        tag: Number(subitemTags[i]),\n      };\n    }),\n  };\n}\n\nexport function initNewItemForm(config) {\n  const { onSubmit } = config;\n\n  const $newItemForm = getElement(IDS.itemForm.form);\n  const $addItemButton = getElement(IDS.itemForm.addButton);\n  const $closeDialogButton = getElement(IDS.itemForm.closeButton);\n  const $addSubitemButton = getElement(IDS.itemForm.addSubitemBtn);\n  const $subitemsList = getElement(IDS.itemForm.subitemsList);\n\n  $newItemForm.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    onSubmit(getNewItemFormData());\n  });\n\n  $addItemButton.addEventListener(\"click\", () => {\n    openNewItemForm();\n  });\n\n  $closeDialogButton.addEventListener(\"click\", () => {\n    closeNewItemForm();\n  });\n\n  $addSubitemButton.addEventListener(\"click\", () => {\n    const $subitemForm = renderSubitemForm();\n    $subitemsList.appendChild($subitemForm);\n  });\n}\n","export const IDS = {\n  items: {\n    list: \"items\",\n    template: \"item-tmpl\",\n    subitemTemplate: \"subitem-tmpl\",\n  },\n\n  itemForm: {\n    dialog: \"new-item-dialog\",\n    form: \"new-item-form\",\n    addButton: \"add-item\",\n    closeButton: \"close-new-item-dialog\",\n    subitemsList: \"new-item-form-subitems\",\n    tagsSelect: \"tags-select\",\n    addSubitemBtn: \"new-item-add-subitem\",\n    subitemTemplate: \"subitem-form-tmpl\",\n  },\n\n  tags: {\n    list: \"tags\",\n    template: \"tag-tmpl\",\n  },\n\n  tagForm: {\n    dialog: \"new-tag-dialog\",\n    form: \"new-tag-form\",\n    addButton: \"add-tag\",\n    closeButton: \"close-new-tag-dialog\",\n  },\n};\n\nconst cache = {};\n\nexport function getElement(id) {\n  if (cache[id]) return cache[id];\n\n  const element = document.getElementById(id);\n  cache[id] = element;\n  return element;\n}\n\nexport function getTemplate(id) {\n  const template = getElement(id);\n  const $clone = template.content.cloneNode(true);\n  return $clone;\n}\n","import { fields, getState } from \"../state\";\nimport { IDS, getElement, getTemplate } from \"./elements\";\n\nconst selectors = {\n  item: \".item\",\n  itemText: \".item-text\",\n  itemPrice: \".item-price\",\n  itemTag: \".item-tag\",\n  itemRemove: \".item-remove\",\n\n  subitems: \".item-subitems\",\n\n  subitem: \".subitem\",\n  subitemText: \".subitem-text\",\n  subitemPrice: \".subitem-price\",\n  subitemTag: \".subitem-tag\",\n};\n\nfunction renderSubitem(subitem) {\n  const $clone = getTemplate(IDS.items.subitemTemplate);\n\n  const $subitem = $clone.querySelector(selectors.subitem);\n  $subitem.querySelector(selectors.subitemText).textContent = subitem.text;\n  $subitem.querySelector(selectors.subitemPrice).textContent = subitem.price;\n\n  const tags = getState(fields.tags);\n\n  const subitemTag = tags.find((tag) => tag.id === subitem.tag);\n  $subitem.querySelector(selectors.subitemTag).textContent =\n    subitemTag?.name || \"\";\n\n  return $subitem;\n}\n\nfunction renderItem(item) {\n  const $clone = getTemplate(IDS.items.template);\n\n  const $item = $clone.querySelector(selectors.item);\n  $item.dataset.itemId = item.id;\n  $item.querySelector(selectors.itemText).textContent = item.text;\n  $item.querySelector(selectors.itemPrice).textContent = item.price;\n\n  const tags = getState(fields.tags);\n\n  const itemTag = tags.find((tag) => tag.id === item.tag);\n  $item.querySelector(selectors.itemTag).textContent = itemTag?.name || \"\";\n\n  if (item.subitems?.length > 0) {\n    const $subitemsList = $item.querySelector(selectors.subitems);\n    item.subitems.forEach((subitem) => {\n      const $subitem = renderSubitem(subitem);\n      $subitemsList.appendChild($subitem);\n    });\n  }\n\n  return $item;\n}\n\nexport function renderItemsList(items) {\n  const $itemsList = getElement(IDS.items.list);\n\n  items.forEach((item) => {\n    const $item = renderItem(item);\n    $itemsList.appendChild($item);\n  });\n}\n\nexport function addItemToList(item) {\n  const $item = renderItem(item);\n\n  const $itemsList = getElement(IDS.items.list);\n  $itemsList.appendChild($item);\n}\n\nexport function removeItemFromList(itemId) {\n  const $element = document.querySelector(`[data-item-id=\"${itemId}\"]`);\n  $element.remove();\n}\n\nexport function initItemsList(config) {\n  const { onRemove } = config;\n\n  const $itemsList = getElement(IDS.items.list);\n  $itemsList.addEventListener(\"click\", (e) => {\n    const $removeButton = e.target.closest(selectors.itemRemove);\n    if ($removeButton) {\n      const $tag = e.target.closest(selectors.item);\n      onRemove(Number($tag.dataset.itemId));\n    }\n  });\n}\n","import { IDS, getElement } from \"./elements\";\n\nfunction resetNewTagForm() {\n  const $newTagForm = getElement(IDS.tagForm.form);\n  $newTagForm.reset();\n}\n\nfunction openNewTagForm() {\n  const $newTagDialog = getElement(IDS.tagForm.dialog);\n  $newTagDialog.showModal();\n}\n\nexport function closeNewTagForm() {\n  const $newTagDialog = getElement(IDS.tagForm.dialog);\n  $newTagDialog.close();\n  resetNewTagForm();\n}\n\nfunction getNewTagFormData() {\n  const $newTagForm = getElement(IDS.tagForm.form);\n  return {\n    name: $newTagForm.elements.name.value,\n  };\n}\n\nexport function initNewTagForm(config) {\n  const { onSubmit } = config;\n\n  const $newTagForm = getElement(IDS.tagForm.form);\n  const $addTagButton = getElement(IDS.tagForm.addButton);\n  const $closeDialogButton = getElement(IDS.tagForm.closeButton);\n\n  console.log($addTagButton)\n\n  $newTagForm.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    onSubmit(getNewTagFormData());\n  });\n\n  $addTagButton.addEventListener(\"click\", () => {\n    openNewTagForm();\n  });\n\n  $closeDialogButton.addEventListener(\"click\", () => {\n    closeNewTagForm();\n  });\n}\n","import { IDS, getElement, getTemplate } from \"./elements\";\n\nconst selectors = {\n  tag: \".tag\",\n  tagName: \".tag-name\",\n  tagRemove: \".tag-remove\",\n};\n\nfunction renderTag(tag) {\n  const $clone = getTemplate(IDS.tags.template);\n\n  const $tag = $clone.querySelector(selectors.tag);\n  $tag.dataset.tagId = tag.id;\n  $tag.querySelector(selectors.tagName).textContent = tag.name;\n  return $tag;\n}\n\nexport function renderTagsList(tags) {\n  const $tagsList = getElement(IDS.tags.list);\n\n  tags.forEach((tag) => {\n    const $tag = renderTag(tag);\n    $tagsList.appendChild($tag);\n  });\n}\n\nexport function addTagToList(tag) {\n  const $tagsList = getElement(IDS.tags.list);\n\n  const $tag = renderTag(tag);\n  $tagsList.appendChild($tag);\n}\n\nexport function removeTagFromList(tagId) {\n  const $element = document.querySelector(`[data-tag-id=\"${tagId}\"]`);\n  $element.remove();\n}\n\nexport function initTagsList(config) {\n  const { onRemove } = config;\n\n  const $tagsList = getElement(IDS.tags.list);\n  $tagsList.addEventListener(\"click\", (e) => {\n    const $removeButton = e.target.closest(selectors.tagRemove);\n    if ($removeButton) {\n      const $tag = e.target.closest(selectors.tag);\n      onRemove(Number($tag.dataset.tagId));\n    }\n  });\n}\n"],"names":["$77b7d876f63ece16$var$dbRequest","$cb5f343bb15c779a$export$ecb8b5d0fe61b71e","$cb5f343bb15c779a$export$1ccac7a1df77a4d0","$77b7d876f63ece16$export$6fec604aa7293d0c","storeName","toWrite","transaction","db","result","objectStore","$77b7d876f63ece16$var$getTags","Promise","resolve","tags","request","getAll","onsuccess","$77b7d876f63ece16$export$28e7436902e0cf8b","indexedDB","open","onupgradeneeded","objectStoreNames","contains","createObjectStore","keyPath","onerror","console","error","all","items","then","$7cf706797b1cdf54$export$5e14cdade93d6f7b","message","data","alert","info","$7cf706797b1cdf54$export$740944ffd2f8d33e","$14d4ca1efde46ee2$export$4dbdc8f16fed8a34","$14d4ca1efde46ee2$export$4bf9923669ad6c63","update","add","remove","$14d4ca1efde46ee2$var$state","$14d4ca1efde46ee2$var$lastId","$14d4ca1efde46ee2$var$callbacks","$14d4ca1efde46ee2$var$onChange","field","event","fieldCbs","eventCbs","forEach","cb","$14d4ca1efde46ee2$export$ec068583843480e7","push","$14d4ca1efde46ee2$export$e16d8520af44a096","instance","$14d4ca1efde46ee2$export$cd7f480d6b8286c3","filter","i","id","$562b1b97bd523649$export$82babaa65029102d","list","template","subitemTemplate","itemForm","dialog","form","addButton","closeButton","subitemsList","tagsSelect","addSubitemBtn","tagForm","$562b1b97bd523649$var$cache","$562b1b97bd523649$export$d16800b7e59a8051","element","document","getElementById","$562b1b97bd523649$export$9b1a70d8e05b0fa6","$clone","content","cloneNode","$88ae43dff40ab9c2$var$renderTagOption","tag","$option","createElement","textContent","name","value","$88ae43dff40ab9c2$export$a7d31dc4e9b4d21a","$tagsSelect","innerHTML","appendChild","$88ae43dff40ab9c2$export$2f62053d3c3a3e3e","$newItemDialog","close","$88ae43dff40ab9c2$var$resetNewItemForm","$newItemForm","$newItemFormSubitemsList","reset","$c151cb9ebf0d3253$var$selectors","item","itemText","itemPrice","itemTag","itemRemove","subitems","subitem","subitemText","subitemPrice","subitemTag","$c151cb9ebf0d3253$var$renderItem","$item","querySelector","dataset","itemId","text","price","find","length","$subitemsList","$subitem","$c151cb9ebf0d3253$var$renderSubitem","$84e1707131c903ad$export$6e142ec7d834c3f8","$newTagDialog","$84e1707131c903ad$var$resetNewTagForm","$newTagForm","$b5a61f6ff1db7acf$var$selectors","tagName","tagRemove","$b5a61f6ff1db7acf$var$renderTag","$tag","tagId","$tagsList","$element","delete","$itemsList","$14d4ca1efde46ee2$export$2cd8252107eb640b","tagsList","itemsList","log","config","onSubmit","$addItemButton","$closeDialogButton","$addSubitemButton","addEventListener","e","preventDefault","$88ae43dff40ab9c2$export$a5a4f02b496d762d","fd","FormData","subitemTexts","subitemPrices","subitemTags","get","Number","map","$88ae43dff40ab9c2$var$openNewItemForm","showModal","$subitemForm","$88ae43dff40ab9c2$var$renderSubitemForm","$subitemSelect","formData","createdAt","Date","newItem","$addTagButton","$84e1707131c903ad$var$getNewTagFormData","elements","$84e1707131c903ad$var$openNewTagForm","newTag","onRemove","$removeButton","target","closest","t","tagItems","some"],"version":3,"file":"index.4fb923eb.js.map"}